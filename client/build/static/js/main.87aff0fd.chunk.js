(this["webpackJsonpopen-data"]=this["webpackJsonpopen-data"]||[]).push([[0],{227:function(e,t,n){},228:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"signup",(function(){return ie})),n.d(a,"login",(function(){return re})),n.d(a,"logout",(function(){return ce}));var o={};n.r(o),n.d(o,"fetchAllSensors",(function(){return se}));var i={};n.r(i),n.d(i,"showNotification",(function(){return le})),n.d(i,"resetNotification",(function(){return ue}));var r,c=n(0),s=n.n(c),l=n(17),u=n.n(l),d=n(29),j=n(43),b=n(22),h=n(47),p=n(164),O=n(13),m="LOGIN",g="LOGIN_SUCCESS",f="SIGN_UP",v="SIGN_UP_SUCCESS",x="LOGOUT",y="SENSORS_FETCH_ALL",S="SENSORS_FETCH_ALL_SUCCESS",C="NOTIFICATION_SHOW_NOTIFICATION",w="NOTIFICATION_RESET_NOTIFICATION",N={isAuthenticated:!1,user:{},accessToken:null},T={sensors:[]},k="/",_="/user/login",I="/user/signup",L=3e3,A="success",E="error",P="warning",F={notification:null},D=Object(h.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case v:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,user:t.payload.data.result,accessToken:t.payload.token});case x:return localStorage.clear(),N;default:return e}},sensor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return t.type===S?Object(O.a)(Object(O.a)({},e),{},{sensors:t.payload}):e},notification:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,o=arguments.length>1?arguments[1]:void 0;if(o.type.endsWith("_FAIL"))return Object(O.a)(Object(O.a)({},a),{},{notification:{type:E,message:null===o||void 0===o||null===(e=o.error)||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,duration:L}});switch(o.type){case C:return Object(O.a)(Object(O.a)({},a),{},{notification:o.notification});case w:return F;default:return a}}}),R=n(165),W=n(128),U=(n(166),n(167)),H=n.n(U),B=n(168),G=n.n(B),M=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).baseURL||"http://localhost:5000",q={key:"root",storage:H.a,blacklist:[]},z={default:{client:G.a.create({baseURL:M,responseType:"json"})}},J=[p.a,Object(R.multiClientMiddleware)(z)],K=[h.a.apply(void 0,J)],V=Object(W.a)(q,D),Q=Object(h.d)(V,h.c.apply(void 0,K)),X=Object(W.b)(Q),Y=n(9),Z=n(384),$=n(387),ee=Object(Z.a)((function(e){return{appBar:Object(Y.a)({borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},e.breakpoints.down("sm"),{flexDirection:"column"}),toolbar:Object(Y.a)({display:"flex",justifyContent:"flex-end"},e.breakpoints.down("sm"),{width:"auto"}),profile:Object(Y.a)({color:"ButtonHighlight",display:"flex",justifyContent:"space-between",alignItems:"center",width:"0"},e.breakpoints.down("sm"),{width:"auto",marginTop:20,justifyContent:"center"}),unauthorizedContainer:{display:"flex",justifyContent:"space-around",width:"400px",alignItems:"center"},logout:{marginLeft:"20px"},purple:{color:e.palette.getContrastText($.a[500]),backgroundColor:$.a[500]}}})),te=n(388),ne=n(390),ae=n(341),oe=n(391),ie=function(e){return{type:f,payload:{request:{method:"POST",url:"/user/signup",data:e}}}},re=function(e){return{type:m,payload:{request:{method:"POST",url:"/user/login",data:e}}}},ce=function(){return{type:x}},se=function(e){return{type:y,payload:{request:{method:"GET",url:"/sensor",headers:{Authorization:"Bearer ".concat(e)}}}}},le=function(e){var t={type:A,message:"Message",duration:L};return{type:C,notification:Object(O.a)(Object(O.a)({},t),e)}},ue=function(e){return{type:w}},de=n(2),je=function(){var e=Object(d.c)((function(e){return e.user.user})),t=Object(d.c)((function(e){return e.user.isAuthenticated})),n=Object(d.b)(),o=Object(b.g)(),i=ee();return Object(de.jsx)(te.a,{className:i.appBar,position:"static",color:"inherit",children:Object(de.jsx)(ne.a,{className:i.toolbar,children:t?Object(de.jsxs)("div",{className:i.profile,children:[e.name&&Object(de.jsxs)(ae.a,{className:i.userName,variant:"h6",children:["Welcome ",e.name]}),Object(de.jsx)(oe.a,{variant:"contained",className:i.logout,color:"secondary",onClick:function(){n(a.logout()),o.push(_)},children:"Logout"})]}):Object(de.jsxs)("div",{className:i.unauthorizedContainer,children:[Object(de.jsx)(oe.a,{component:j.b,to:_,variant:"contained",color:"primary",children:"Sign In"}),Object(de.jsx)(oe.a,{component:j.b,to:I,variant:"contained",color:"primary",children:"Sign up"})]})})})},be=n(20),he=n(395),pe=n(340),Oe=n(392),me=Object(Z.a)((function(e){return{home:{display:"flex",flexDirection:"column",color:"ButtonHighlight",alignItems:"center"},chartContainer:{marginTop:e.spacing(8),display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2),width:"30rem",height:"30rem"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ge=n(399),fe=n(393),ve=n(394),xe=n(174),ye=n.n(xe),Se=n(175),Ce=n.n(Se),we=function(e){var t=e.name,n=e.handleChange,a=e.label,o=e.half,i=e.autoFocus,r=e.type,c=e.handleShowPassword;return Object(de.jsx)(Oe.a,{item:!0,xs:12,sm:o?6:12,children:Object(de.jsx)(ge.a,{name:t,onChange:n,variant:"outlined",required:!0,fullWidth:!0,label:a,autoFocus:i,type:r,InputProps:"password"===t?{endAdornment:Object(de.jsx)(fe.a,{position:"end",children:Object(de.jsx)(ve.a,{onClick:c,children:"password"===r?Object(de.jsx)(ye.a,{}):Object(de.jsx)(Ce.a,{})})})}:null})})},Ne=Object(b.h)((function(){var e=Object(d.b)(),t=Object(b.g)(),n=me(),r=Object(c.useState)({name:"",email:"",password:""}),s=Object(be.a)(r,2),l=s[0],u=s[1],j=Object(c.useState)(!1),h=Object(be.a)(j,2),p=h[0],m=h[1],g=function(e){return u(Object(O.a)(Object(O.a)({},l),{},Object(Y.a)({},e.target.name,e.target.value)))};return Object(de.jsx)("div",{className:"signup page",children:Object(de.jsx)(he.a,{component:"main",maxWidth:"xs",children:Object(de.jsxs)(pe.a,{className:n.paper,elevation:6,children:[Object(de.jsx)(ae.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(de.jsx)("form",{className:n.form,onSubmit:function(n){return n.preventDefault(),e(a.signup(l)).then((function(n){var r,c,s,l=null===n||void 0===n||null===(r=n.payload)||void 0===r||null===(c=r.data)||void 0===c||null===(s=c.result)||void 0===s?void 0:s.accessToken;if(localStorage.setItem("accessToken",JSON.stringify(l)),setTimeout((function(){e(a.logout()),t.push(_),e(i.showNotification({type:P,message:"Token has expired. Please login again"}))}),36e5),l)return e(o.fetchAllSensors(l)).then((function(e){return t.push(k)}))}))},children:Object(de.jsxs)(Oe.a,{container:!0,spacing:2,children:[Object(de.jsx)(we,{name:"name",label:"Name",handleChange:g}),Object(de.jsx)(we,{name:"email",label:"Email Address",handleChange:g,type:"email"}),Object(de.jsx)(we,{name:"password",label:"Password",handleChange:g,type:p?"text":"password",handleShowPassword:function(){return m(!p)}}),Object(de.jsx)(oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign up"})]})})]})})})})),Te=n(127),ke=n.n(Te),_e=n(176),Ie=n(10),Le=n(11),Ae=n(16),Ee=n(15),Pe=n(63),Fe=n(39),De=n.n(Fe),Re=n(55),We=n(177),Ue=n.n(We),He=(n(227),n(228),function(e){var t=e.children,n=e.show,a=e.closeModal,o=e.modalContainerClassName,i=(e.contentClassName,e.header,e.renderFooter,e.disabledClickOutside),r=["modal__wrapper"];n?r.push("show"):r.push("hide");var c=["modal__container"];return o&&c.push(o),Object(de.jsx)("div",{className:r.join(" "),onClick:function(e){i||"checkbox"!==e.target.type&&(e.defaultPrevented||a&&a())},children:Object(de.jsx)("div",{className:c.join(" "),onClick:function(e){if("checkbox"!==e.target.type)return e.preventDefault()},children:t})})}),Be=Object(Re.css)(r||(r=Object(Pe.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]))),Ge=function(e){var t=function(t){Object(Ae.a)(a,t);var n=Object(Ee.a)(a);function a(){var e;return Object(Ie.a)(this,a),(e=n.call(this)).showLoading=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.setState({loading:!0},(function(){t||(e.closeLoadingTimeout=setTimeout((function(){e.mounted&&e.setState({loading:!1})}),1e6))}))},e.hideLoading=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==t?e.setState({loading:!1}):e.setState({loading:!1},t)},e.renderLoading=function(){return Object(de.jsx)(Ue.a,{css:Be,size:400,color:"#2C6CAF",loading:e.state.loading})},e.state={loading:!1},e.mounted=!1,e.closeLoadingTimeout=null,e}return Object(Le.a)(a,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.closeLoadingTimeout&&clearTimeout(this.closeLoadingTimeout)}},{key:"render",value:function(){var t={showLoading:this.showLoading,hideLoading:this.hideLoading};return Object(de.jsxs)("div",{className:"loading-hoc__container",children:[Object(de.jsx)(He,{show:this.state.loading,className:"loading-modal__container",showClose:!1,children:this.renderLoading()}),Object(de.jsx)(e,Object(O.a)(Object(O.a)({},this.props),t))]})}}]),a}(s.a.PureComponent);return De()(t,e),t},Me=Ge((function(e){var t=e.showLoading,n=e.hideLoading,r=Object(b.g)(),s=Object(d.b)(),l=me(),u=Object(c.useState)(!1),j=Object(be.a)(u,2),h=j[0],p=j[1],m=Object(c.useState)({email:"",password:""}),g=Object(be.a)(m,2),f=g[0],v=g[1],x=function(e){return v(Object(O.a)(Object(O.a)({},f),{},Object(Y.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(_e.a)(ke.a.mark((function e(c){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,t(),e.next=5,s(a.login(f)).then((function(e){var t,n,c,l=null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(c=n.result)||void 0===c?void 0:c.accessToken;if(localStorage.setItem("accessToken",JSON.stringify(l)),setTimeout((function(){s(a.logout()),r.push(_),s(i.showNotification({type:P,message:"Token has expired. Please login again"}))}),36e5),l)return s(o.fetchAllSensors(l)).then((function(e){return r.push(k)}))}));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,n(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,7,9,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsx)(he.a,{component:"main",maxWidth:"xs",children:Object(de.jsxs)(pe.a,{className:l.paper,elevation:6,children:[Object(de.jsx)(ae.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(de.jsx)("form",{className:l.form,onSubmit:y,children:Object(de.jsxs)(Oe.a,{container:!0,spacing:2,children:[Object(de.jsx)(we,{name:"email",label:"Email Address",handleChange:x,type:"email"}),Object(de.jsx)(we,{name:"password",label:"Password",handleChange:x,type:h?"text":"password",handleShowPassword:function(){return p(!h)}}),Object(de.jsx)(oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,children:"Sign in"})]})})]})})})),qe=n(100),ze=n(181),Je=["date"],Ke=function(){var e,t,n=null===(e=Object(d.c)((function(e){return e.sensor.sensors})))||void 0===e||null===(t=e.data)||void 0===t?void 0:t.result,a=me(),o=(n.date,Object(qe.a)(n,Je)),i={labels:Object.keys(o),datasets:[{data:Object.values(o),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return Object(de.jsxs)("div",{className:a.home,children:[Object(de.jsx)("h1",{children:" List of Sensors"}),Object(de.jsx)("div",{className:a.chartContainer,children:Object(de.jsx)(ze.a,{data:i})})]})},Ve=["component","unauthenticatedRedirect"],Qe=function(e){var t=e.component,n=e.unauthenticatedRedirect,a=void 0===n?"/user/signup":n,o=Object(qe.a)(e,Ve);return Object(d.c)((function(e){return e.user.isAuthenticated}))?Object(de.jsx)(b.b,Object(O.a)(Object(O.a)({},o),{},{render:function(e){return Object(de.jsx)(t,Object(O.a)({},e))}})):Object(de.jsx)(b.a,{to:a})},Xe=n(401),Ye=n(400),Ze=s.a.forwardRef((function(e,t){return Object(de.jsx)(Ye.a,Object(O.a)({elevation:6,ref:t,variant:"filled"},e))}));function $e(){var e=Object(d.b)(),t=Object(c.useState)(!1),n=Object(be.a)(t,2),a=n[0],o=n[1],r=Object(d.c)((function(e){return e.notification.notification}));Object(c.useEffect)((function(){r&&o(!0)}),[r]);var s=function(t,n){"clickaway"!==n&&(e(i.resetNotification()),o(!1))};if(!r)return null;var l=r.message,u=r.duration,j=r.type;return Object(de.jsx)("div",{className:"snackbar",children:Object(de.jsx)(Xe.a,{open:a,autoHideDuration:u,onClose:s,children:Object(de.jsx)("div",{children:Object(de.jsx)(Ze,{onClose:s,severity:j,children:l||l.message})})})})}var et=function(){return Object(de.jsxs)(d.a,{store:Q,children:[Object(de.jsxs)(j.a,{children:[Object(de.jsx)(je,{}),Object(de.jsx)(b.b,{exact:!0,path:I,component:Ne}),Object(de.jsx)(b.b,{exact:!0,path:_,component:Me}),Object(de.jsx)(b.d,{children:Object(de.jsx)(Qe,{exact:!0,path:k,component:Ke})})]}),Object(de.jsx)($e,{})]})},tt=n(180);u.a.render(Object(de.jsx)(tt.a,{loading:null,persistor:X,children:Object(de.jsx)(et,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.87aff0fd.chunk.js.map
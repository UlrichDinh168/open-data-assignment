(this["webpackJsonpopen-data"]=this["webpackJsonpopen-data"]||[]).push([[0],{221:function(e,t,n){},222:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"signup",(function(){return oe})),n.d(a,"login",(function(){return ie})),n.d(a,"logout",(function(){return ce}));var r={};n.r(r),n.d(r,"fetchAllSensors",(function(){return se}));var o={};n.r(o),n.d(o,"showNotification",(function(){return le})),n.d(o,"resetNotification",(function(){return ue}));var i,c=n(0),s=n.n(c),l=n(13),u=n.n(l),d=n(24),j=n(38),b=n(18),p=n(42),h=n(158),O=n(11),m="LOGIN",g="LOGIN_SUCCESS",f="SIGN_UP",x="SIGN_UP_SUCCESS",v="LOGOUT",y="SENSORS_FETCH_ALL",S="SENSORS_FETCH_ALL_SUCCESS",C="NOTIFICATION_SHOW_NOTIFICATION",w="NOTIFICATION_RESET_NOTIFICATION",N={isAuthenticated:!1,user:{},accessToken:null},T={sensors:[]},_="/",I="/user/login",k="/user/signup",A=3e3,E="success",L="error",P="warning",F={notification:null},R=Object(p.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case x:return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,user:t.payload.data.result,accessToken:t.payload.token});case v:return localStorage.clear(),N;default:return e}},sensor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return t.type===S?Object(O.a)(Object(O.a)({},e),{},{sensors:t.payload}):e},notification:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,r=arguments.length>1?arguments[1]:void 0;if(r.type.endsWith("_FAIL"))return Object(O.a)(Object(O.a)({},a),{},{notification:{type:L,message:null===r||void 0===r||null===(e=r.error)||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,duration:A}});switch(r.type){case C:return Object(O.a)(Object(O.a)({},a),{},{notification:r.notification});case w:return F;default:return a}}}),W=n(159),D=n(122),U=(n(160),n(161)),H=n.n(U),B=n(162),G=n.n(B),q=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).baseURL||"http://localhost:5000",z={key:"root",storage:H.a,blacklist:[]},J={default:{client:G.a.create({baseURL:q,responseType:"json"})}},M=[h.a,Object(W.multiClientMiddleware)(J)],K=[p.a.apply(void 0,M)],V=Object(D.a)(z,R),Q=Object(p.d)(V,p.c.apply(void 0,K)),X=Object(D.b)(Q),Y=n(9),Z=n(378),$=n(381),ee=Object(Z.a)((function(e){return{appBar:Object(Y.a)({borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},e.breakpoints.down("sm"),{flexDirection:"column"}),toolbar:Object(Y.a)({display:"flex",justifyContent:"flex-end"},e.breakpoints.down("sm"),{width:"auto"}),profile:Object(Y.a)({color:"ButtonHighlight",display:"flex",justifyContent:"space-between",alignItems:"center",width:"0"},e.breakpoints.down("sm"),{width:"auto",marginTop:20,justifyContent:"center"}),unauthorizedContainer:{display:"flex",justifyContent:"space-around",width:"400px",alignItems:"center"},logout:{marginLeft:"20px"},purple:{color:e.palette.getContrastText($.a[500]),backgroundColor:$.a[500]}}})),te=n(382),ne=n(384),ae=n(335),re=n(385),oe=function(e){return{type:f,payload:{request:{method:"POST",url:"/user/signup",data:e}}}},ie=function(e){return{type:m,payload:{request:{method:"POST",url:"/user/login",data:e}}}},ce=function(){return{type:v}},se=function(e){return{type:y,payload:{request:{method:"GET",url:"/sensor",headers:{Authorization:"Bearer ".concat(e)}}}}},le=function(e){var t={type:E,message:"Message",duration:A};return{type:C,notification:Object(O.a)(Object(O.a)({},t),e)}},ue=function(e){return{type:w}},de=n(2),je=function(){var e=Object(d.c)((function(e){return e.user.user})),t=Object(d.c)((function(e){return e.user.isAuthenticated})),n=Object(d.b)(),r=Object(b.g)(),o=ee();return Object(de.jsx)(te.a,{className:o.appBar,position:"static",color:"inherit",children:Object(de.jsx)(ne.a,{className:o.toolbar,children:t?Object(de.jsxs)("div",{className:o.profile,children:[e.name&&Object(de.jsxs)(ae.a,{className:o.userName,variant:"h6",children:["Welcome ",e.name]}),Object(de.jsx)(re.a,{variant:"contained",className:o.logout,color:"secondary",onClick:function(){n(a.logout()),r.push(I)},children:"Logout"})]}):Object(de.jsxs)("div",{className:o.unauthorizedContainer,children:[Object(de.jsx)(re.a,{component:j.b,to:I,variant:"contained",color:"primary",children:"Sign In"}),Object(de.jsx)(re.a,{component:j.b,to:k,variant:"contained",color:"primary",children:"Sign up"})]})})})},be=n(15),pe=n(389),he=n(334),Oe=n(386),me=Object(Z.a)((function(e){return{home:{display:"flex",flexDirection:"column",color:"ButtonHighlight",alignItems:"center"},chartContainer:{marginTop:e.spacing(8),display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2),width:"30rem",height:"30rem"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ge=n(393),fe=n(387),xe=n(388),ve=n(168),ye=n.n(ve),Se=n(169),Ce=n.n(Se),we=function(e){var t=e.name,n=e.handleChange,a=e.label,r=e.half,o=e.autoFocus,i=e.type,c=e.handleShowPassword;return Object(de.jsx)(Oe.a,{item:!0,xs:12,sm:r?6:12,children:Object(de.jsx)(ge.a,{name:t,onChange:n,variant:"outlined",required:!0,fullWidth:!0,label:a,autoFocus:o,type:i,InputProps:"password"===t?{endAdornment:Object(de.jsx)(fe.a,{position:"end",children:Object(de.jsx)(xe.a,{onClick:c,children:"password"===i?Object(de.jsx)(ye.a,{}):Object(de.jsx)(Ce.a,{})})})}:null})})},Ne=Object(b.h)((function(){var e=Object(d.b)(),t=Object(b.g)(),n=me(),i=Object(c.useState)({name:"",email:"",password:""}),s=Object(be.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(!1),p=Object(be.a)(j,2),h=p[0],m=p[1],g=function(e){return u(Object(O.a)(Object(O.a)({},l),{},Object(Y.a)({},e.target.name,e.target.value)))};return Object(de.jsx)("div",{className:"signup page",children:Object(de.jsx)(pe.a,{component:"main",maxWidth:"xs",children:Object(de.jsxs)(he.a,{className:n.paper,elevation:6,children:[Object(de.jsx)(ae.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(de.jsx)("form",{className:n.form,onSubmit:function(n){return n.preventDefault(),e(a.signup(l)).then((function(n){var i,c,s,l=null===n||void 0===n||null===(i=n.payload)||void 0===i||null===(c=i.data)||void 0===c||null===(s=c.result)||void 0===s?void 0:s.accessToken;if(localStorage.setItem("accessToken",JSON.stringify(l)),setTimeout((function(){e(a.logout()),t.push(I),e(o.showNotification({type:P,message:"Token has expired. Please login again"}))}),36e5),l)return e(r.fetchAllSensors(l)).then((function(e){return t.push(_)}))}))},children:Object(de.jsxs)(Oe.a,{container:!0,spacing:2,children:[Object(de.jsx)(we,{name:"name",label:"Name",handleChange:g}),Object(de.jsx)(we,{name:"email",label:"Email Address",handleChange:g,type:"email"}),Object(de.jsx)(we,{name:"password",label:"Password",handleChange:g,type:h?"text":"password",handleShowPassword:function(){return m(!h)}}),Object(de.jsx)(re.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign up"})]})})]})})})})),Te=n(121),_e=n.n(Te),Ie=n(170),ke=n(57),Ae=n(34),Ee=n.n(Ae),Le=n(50),Pe=n(171),Fe=n.n(Pe),Re=(n(221),n(222),function(e){var t=e.children,n=e.show,a=e.closeModal,r=e.modalContainerClassName,o=(e.contentClassName,e.header,e.renderFooter,e.disabledClickOutside),i=["modal__wrapper"];n?i.push("show"):i.push("hide");var c=["modal__container"];return r&&c.push(r),Object(de.jsx)("div",{className:i.join(" "),onClick:function(e){o||"checkbox"!==e.target.type&&(e.defaultPrevented||a&&a())},children:Object(de.jsx)("div",{className:c.join(" "),onClick:function(e){if("checkbox"!==e.target.type)return e.preventDefault()},children:t})})}),We=Object(Le.css)(i||(i=Object(ke.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]))),De=function(e){var t=function(){var t=s.a.useState(!1),n=Object(be.a)(t,2),a=n[0],r=n[1];s.a.useEffect((function(){return!0,function(){null}}),[a]);var o={showLoading:function(){r(!0)},hideLoading:function(){r(!1)}};return Object(de.jsxs)("div",{className:"loading-hoc__container",children:[Object(de.jsx)(Re,{show:a,className:"loading-modal__container",showClose:!1,children:Object(de.jsx)(Fe.a,{css:We,size:400,color:"#2C6CAF",loading:a})}),Object(de.jsx)(e,Object(O.a)({},o))]})};return Ee()(t,e),t}((function(e){var t=e.showLoading,n=e.hideLoading,i=Object(b.g)(),s=Object(d.b)(),l=me(),u=Object(c.useState)(!1),j=Object(be.a)(u,2),p=j[0],h=j[1],m=Object(c.useState)({email:"",password:""}),g=Object(be.a)(m,2),f=g[0],x=g[1],v=function(e){return x(Object(O.a)(Object(O.a)({},f),{},Object(Y.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(Ie.a)(_e.a.mark((function e(c){return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,t(),e.next=5,s(a.login(f)).then((function(e){var t,n,c,l=null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(c=n.result)||void 0===c?void 0:c.accessToken;if(localStorage.setItem("accessToken",JSON.stringify(l)),setTimeout((function(){s(a.logout()),i.push(I),s(o.showNotification({type:P,message:"Token has expired. Please login again"}))}),36e5),l)return s(r.fetchAllSensors(l)).then((function(e){return i.push(_)}))}));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,n(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,7,9,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsx)(pe.a,{component:"main",maxWidth:"xs",children:Object(de.jsxs)(he.a,{className:l.paper,elevation:6,children:[Object(de.jsx)(ae.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(de.jsx)("form",{className:l.form,onSubmit:y,children:Object(de.jsxs)(Oe.a,{container:!0,spacing:2,children:[Object(de.jsx)(we,{name:"email",label:"Email Address",handleChange:v,type:"email"}),Object(de.jsx)(we,{name:"password",label:"Password",handleChange:v,type:p?"text":"password",handleShowPassword:function(){return h(!p)}}),Object(de.jsx)(re.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,children:"Sign in"})]})})]})})})),Ue=n(94),He=n(175),Be=["date"],Ge=function(){var e,t,n=null===(e=Object(d.c)((function(e){return e.sensor.sensors})))||void 0===e||null===(t=e.data)||void 0===t?void 0:t.result,a=me(),r=(n.date,Object(Ue.a)(n,Be)),o={labels:Object.keys(r),datasets:[{data:Object.values(r),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return Object(de.jsxs)("div",{className:a.home,children:[Object(de.jsx)("h1",{children:" List of Sensors"}),Object(de.jsx)("div",{className:a.chartContainer,children:Object(de.jsx)(He.a,{data:o})})]})},qe=["component","unauthenticatedRedirect"],ze=function(e){var t=e.component,n=e.unauthenticatedRedirect,a=void 0===n?"/user/signup":n,r=Object(Ue.a)(e,qe);return Object(d.c)((function(e){return e.user.isAuthenticated}))?Object(de.jsx)(b.b,Object(O.a)(Object(O.a)({},r),{},{render:function(e){return Object(de.jsx)(t,Object(O.a)({},e))}})):Object(de.jsx)(b.a,{to:a})};n(395),n(394);var Je=function(){return Object(de.jsx)(d.a,{store:Q,children:Object(de.jsxs)(j.a,{children:[Object(de.jsx)(je,{}),Object(de.jsx)(b.b,{exact:!0,path:k,component:Ne}),Object(de.jsx)(b.b,{exact:!0,path:I,component:De}),Object(de.jsx)(b.d,{children:Object(de.jsx)(ze,{exact:!0,path:_,component:Ge})})]})})},Me=n(174);u.a.render(Object(de.jsx)(Me.a,{loading:null,persistor:X,children:Object(de.jsx)(Je,{})}),document.getElementById("root"))}},[[332,1,2]]]);
//# sourceMappingURL=main.5d1ab2bd.chunk.js.map